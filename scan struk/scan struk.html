<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Struk Scanner 📄</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="scanner-card text-center">
            <h2>📄 Struk Scanner</h2>
            <p class="text-muted">Unggah gambar struk pembayaran untuk diubah menjadi data.</p>

            <div class="upload-area">
                <input type="file" id="imageUpload" accept="image/*" hidden>
                <label for="imageUpload" class="upload-label">
                    <span>⬆️ Klik untuk Unggah Gambar</span>
                </label>
            </div>

            <div id="loader" class="d-none">
                <div class="spinner-border text-primary" role="status"></div>
                <p class="mt-2">Menganalisis gambar, mohon tunggu...</p>
            </div>

            <img id="preview" src="#" alt="Pratinjau Gambar" class="d-none"/>
            <div id="output" class="mt-4"></div>
            <button id="downloadBtn" class="btn btn-success mt-3 d-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-excel-fill" viewBox="0 0 16 16">
                    <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M5.884 6.68 8 9.219l2.116-2.54a.5.5 0 1 1 .768.641L8.651 10l2.233 2.68a.5.5 0 0 1-.768.64L8 10.781l-2.116 2.54a.5.5 0 0 1-.768-.641L7.349 10 5.116 7.32a.5.5 0 1 1 .768-.64"/>
                </svg>
                Unduh sebagai Excel
            </button>
        </div>

        <div class="history-card mt-4">
            <h3 class="text-center">Riwayat Pindaian</h3>
            <div id="historyTable" class="table-responsive"></div>
        </div>
    </div>

    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="app.js"></script>
</body>
</html>